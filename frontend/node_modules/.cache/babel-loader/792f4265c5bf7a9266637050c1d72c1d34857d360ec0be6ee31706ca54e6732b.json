{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{API_ENDPOINTS}from'../utils/api';import ClientCrypto from'../utils/crypto';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Messaging(_ref){let{token}=_ref;const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState('');const[recipient,setRecipient]=useState('');const[loading,setLoading]=useState(false);const[sending,setSending]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');const privateKey=localStorage.getItem('privateKey');const user=JSON.parse(localStorage.getItem('user')||'{}');useEffect(()=>{fetchMessages();},[]);const fetchMessages=async()=>{setLoading(true);try{const res=await axios.get(API_ENDPOINTS.MESSAGE.LIST);setMessages(res.data.data||[]);}catch(err){var _err$response,_err$response$data;setError('Failed to fetch messages: '+(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message));}finally{setLoading(false);}};const handleSendMessage=async e=>{e.preventDefault();if(!newMessage.trim()||!recipient.trim()||!privateKey){setError('Please enter a message, recipient, and ensure you are logged in');return;}setSending(true);setError('');setSuccess('');try{// Get recipient's public key\nconst recipientRes=await axios.get(API_ENDPOINTS.AUTH.PUBLIC_KEY(recipient));const recipientPublicKey=recipientRes.data.data.publicKey;// Encrypt message with recipient's public key\nconst encryptedMessage=ClientCrypto.encryptWithPublicKey(newMessage,recipientPublicKey);// Create digital signature\nconst signature=ClientCrypto.createSignature(newMessage,privateKey);const res=await axios.post(API_ENDPOINTS.MESSAGE.SEND,{recipient,encryptedContent:encryptedMessage,signature,privateKey});setSuccess(`Message sent to ${recipient} successfully!`);setNewMessage('');setRecipient('');fetchMessages();}catch(err){var _err$response2,_err$response2$data;setError('Send failed: '+(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||err.message));}finally{setSending(false);}};const handleDeleteMessage=async messageId=>{if(!window.confirm('Are you sure you want to delete this message?')){return;}setLoading(true);setError('');try{await axios.delete(API_ENDPOINTS.MESSAGE.DELETE(messageId));setSuccess('Message deleted successfully!');fetchMessages();}catch(err){var _err$response3,_err$response3$data;setError('Delete failed: '+(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.error)||err.message));}finally{setLoading(false);}};const decryptMessage=message=>{try{if(!privateKey){return'[Unable to decrypt - private key not available]';}return ClientCrypto.decryptWithPrivateKey(message.encryptedContent,privateKey);}catch(err){return'[Unable to decrypt - invalid key or corrupted message]';}};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8 max-w-4xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-white mb-2 text-shadow\",children:\"Secure Messaging\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white/80 text-lg\",children:\"Send and receive encrypted messages securely\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl animate-slide-up\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-red-400 mr-3\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-200\",children:error})]})}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-xl animate-slide-up\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-green-400 mr-3\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-200\",children:success})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card mb-8 hover:shadow-glow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center mr-3 animate-glow\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-6 w-6 text-white\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-white\",children:\"Send New Message\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendMessage,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"recipient\",className:\"block text-sm font-medium text-white/90 mb-2\",children:\"Recipient Username\"}),/*#__PURE__*/_jsx(\"input\",{id:\"recipient\",type:\"text\",placeholder:\"Enter recipient's username\",value:recipient,onChange:e=>setRecipient(e.target.value),className:\"input-field focus-ring\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"message\",className:\"block text-sm font-medium text-white/90 mb-2\",children:\"Message\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"message\",placeholder:\"Type your message here...\",value:newMessage,onChange:e=>setNewMessage(e.target.value),rows:4,className:\"input-field focus-ring resize-none\",required:true}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-xs text-white/60\",children:\"Message will be encrypted end-to-end and digitally signed\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:sending||!newMessage.trim()||!recipient.trim(),className:\"btn-primary w-full py-3\",children:sending?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Encrypting & Sending...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 mr-2 inline-block\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"})}),\"Send Message\"]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center mr-3 animate-pulse-soft\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-6 w-6 text-white\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-white\",children:\"Messages\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchMessages,disabled:loading,className:\"text-white/70 hover:text-white p-2 rounded-lg hover:bg-white/10 transition-colors duration-200\",title:\"Refresh\",children:loading?/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin h-5 w-5\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}):/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4 max-h-96 overflow-y-auto\",children:messages.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-12 w-12 text-white/40 mx-auto mb-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white/60\",children:\"No messages yet\"})]}):messages.map(message=>{var _message$sender,_user$username,_ref2,_message$sender2,_message$sender3,_message$recipient;const isSentByUser=((_message$sender=message.sender)===null||_message$sender===void 0?void 0:_message$sender.username)===user.username||message.sender===user.username;const decryptedContent=decryptMessage(message);return/*#__PURE__*/_jsxs(\"div\",{className:`relative p-4 rounded-lg border ${isSentByUser?'bg-blue-500/20 border-blue-400/30 ml-8':'bg-white/5 border-white/20 mr-8'} hover:bg-white/10 transition-all duration-200`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:`w-8 h-8 rounded-full flex items-center justify-center ${isSentByUser?'bg-blue-500':'bg-green-500'}`,children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm font-medium\",children:isSentByUser?(_user$username=user.username)===null||_user$username===void 0?void 0:_user$username.charAt(0).toUpperCase():(_ref2=((_message$sender2=message.sender)===null||_message$sender2===void 0?void 0:_message$sender2.username)||message.sender)===null||_ref2===void 0?void 0:_ref2.charAt(0).toUpperCase()})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white font-medium text-sm\",children:isSentByUser?'You':((_message$sender3=message.sender)===null||_message$sender3===void 0?void 0:_message$sender3.username)||message.sender}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white/60 text-xs\",children:formatDate(message.createdAt)})]})]}),isSentByUser&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteMessage(message._id),className:\"text-red-400 hover:text-red-300 p-1 rounded-lg hover:bg-white/10 transition-colors duration-200\",title:\"Delete\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-white text-sm leading-relaxed whitespace-pre-wrap\",children:decryptedContent})}),!isSentByUser&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-white/50\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"To: \",((_message$recipient=message.recipient)===null||_message$recipient===void 0?void 0:_message$recipient.username)||message.recipient]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-xs text-white/40 mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-3 w-3 mr-1\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m5.018-4.118a3.508 3.508 0 00-4.95 0L5.36 15.49a3.508 3.508 0 004.95 4.95l5.708-5.707a3.508 3.508 0 000-4.95z\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Encrypted\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-3 w-3 mr-1\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Verified\"})]})]})]},message._id);})})]})]});}export default Messaging;","map":{"version":3,"names":["React","useState","useEffect","axios","API_ENDPOINTS","ClientCrypto","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Messaging","_ref","token","messages","setMessages","newMessage","setNewMessage","recipient","setRecipient","loading","setLoading","sending","setSending","error","setError","success","setSuccess","privateKey","localStorage","getItem","user","JSON","parse","fetchMessages","res","get","MESSAGE","LIST","data","err","_err$response","_err$response$data","response","message","handleSendMessage","e","preventDefault","trim","recipientRes","AUTH","PUBLIC_KEY","recipientPublicKey","publicKey","encryptedMessage","encryptWithPublicKey","signature","createSignature","post","SEND","encryptedContent","_err$response2","_err$response2$data","handleDeleteMessage","messageId","window","confirm","delete","DELETE","_err$response3","_err$response3$data","decryptMessage","decryptWithPrivateKey","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","className","children","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","onSubmit","htmlFor","id","type","placeholder","value","onChange","target","required","rows","disabled","xmlns","cx","cy","r","onClick","title","length","map","_message$sender","_user$username","_ref2","_message$sender2","_message$sender3","_message$recipient","isSentByUser","sender","username","decryptedContent","charAt","toUpperCase","createdAt","_id"],"sources":["/workspace/frontend/src/components/Messaging.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { API_ENDPOINTS } from '../utils/api';\nimport ClientCrypto from '../utils/crypto';\n\nfunction Messaging({ token }) {\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [recipient, setRecipient] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [sending, setSending] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  const privateKey = localStorage.getItem('privateKey');\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\n\n  useEffect(() => {\n    fetchMessages();\n  }, []);\n\n  const fetchMessages = async () => {\n    setLoading(true);\n    try {\n      const res = await axios.get(API_ENDPOINTS.MESSAGE.LIST);\n      setMessages(res.data.data || []);\n    } catch (err) {\n      setError('Failed to fetch messages: ' + (err.response?.data?.error || err.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    if (!newMessage.trim() || !recipient.trim() || !privateKey) {\n      setError('Please enter a message, recipient, and ensure you are logged in');\n      return;\n    }\n\n    setSending(true);\n    setError('');\n    setSuccess('');\n\n    try {\n      // Get recipient's public key\n      const recipientRes = await axios.get(API_ENDPOINTS.AUTH.PUBLIC_KEY(recipient));\n      const recipientPublicKey = recipientRes.data.data.publicKey;\n\n      // Encrypt message with recipient's public key\n      const encryptedMessage = ClientCrypto.encryptWithPublicKey(newMessage, recipientPublicKey);\n\n      // Create digital signature\n      const signature = ClientCrypto.createSignature(newMessage, privateKey);\n\n      const res = await axios.post(API_ENDPOINTS.MESSAGE.SEND, {\n        recipient,\n        encryptedContent: encryptedMessage,\n        signature,\n        privateKey\n      });\n\n      setSuccess(`Message sent to ${recipient} successfully!`);\n      setNewMessage('');\n      setRecipient('');\n      fetchMessages();\n    } catch (err) {\n      setError('Send failed: ' + (err.response?.data?.error || err.message));\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const handleDeleteMessage = async (messageId) => {\n    if (!window.confirm('Are you sure you want to delete this message?')) {\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      await axios.delete(API_ENDPOINTS.MESSAGE.DELETE(messageId));\n      setSuccess('Message deleted successfully!');\n      fetchMessages();\n    } catch (err) {\n      setError('Delete failed: ' + (err.response?.data?.error || err.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const decryptMessage = (message) => {\n    try {\n      if (!privateKey) {\n        return '[Unable to decrypt - private key not available]';\n      }\n      return ClientCrypto.decryptWithPrivateKey(message.encryptedContent, privateKey);\n    } catch (err) {\n      return '[Unable to decrypt - invalid key or corrupted message]';\n    }\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 max-w-4xl\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-4xl font-bold text-white mb-2 text-shadow\">Secure Messaging</h1>\n        <p className=\"text-white/80 text-lg\">Send and receive encrypted messages securely</p>\n      </div>\n\n      {/* Alerts */}\n      {error && (\n        <div className=\"mb-6 p-4 bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl animate-slide-up\">\n          <div className=\"flex items-center\">\n            <svg className=\"h-5 w-5 text-red-400 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            <p className=\"text-sm text-red-200\">{error}</p>\n          </div>\n        </div>\n      )}\n\n      {success && (\n        <div className=\"mb-6 p-4 bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-xl animate-slide-up\">\n          <div className=\"flex items-center\">\n            <svg className=\"h-5 w-5 text-green-400 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            <p className=\"text-sm text-green-200\">{success}</p>\n          </div>\n        </div>\n      )}\n\n      {/* Send Message Form */}\n      <div className=\"glass-card mb-8 hover:shadow-glow\">\n        <div className=\"flex items-center mb-6\">\n          <div className=\"w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center mr-3 animate-glow\">\n            <svg className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\n            </svg>\n          </div>\n          <h2 className=\"text-xl font-semibold text-white\">Send New Message</h2>\n        </div>\n\n        <form onSubmit={handleSendMessage} className=\"space-y-4\">\n          <div>\n            <label htmlFor=\"recipient\" className=\"block text-sm font-medium text-white/90 mb-2\">\n              Recipient Username\n            </label>\n            <input\n              id=\"recipient\"\n              type=\"text\"\n              placeholder=\"Enter recipient's username\"\n              value={recipient}\n              onChange={(e) => setRecipient(e.target.value)}\n              className=\"input-field focus-ring\"\n              required\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"message\" className=\"block text-sm font-medium text-white/90 mb-2\">\n              Message\n            </label>\n            <textarea\n              id=\"message\"\n              placeholder=\"Type your message here...\"\n              value={newMessage}\n              onChange={(e) => setNewMessage(e.target.value)}\n              rows={4}\n              className=\"input-field focus-ring resize-none\"\n              required\n            />\n            <p className=\"mt-2 text-xs text-white/60\">\n              Message will be encrypted end-to-end and digitally signed\n            </p>\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={sending || !newMessage.trim() || !recipient.trim()}\n            className=\"btn-primary w-full py-3\"\n          >\n            {sending ? (\n              <div className=\"flex items-center justify-center\">\n                <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n                Encrypting & Sending...\n              </div>\n            ) : (\n              <>\n                <svg className=\"h-5 w-5 mr-2 inline-block\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\n                </svg>\n                Send Message\n              </>\n            )}\n          </button>\n        </form>\n      </div>\n\n      {/* Messages List */}\n      <div className=\"glass-card\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center\">\n            <div className=\"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center mr-3 animate-pulse-soft\">\n              <svg className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n              </svg>\n            </div>\n            <h2 className=\"text-xl font-semibold text-white\">Messages</h2>\n          </div>\n          <button\n            onClick={fetchMessages}\n            disabled={loading}\n            className=\"text-white/70 hover:text-white p-2 rounded-lg hover:bg-white/10 transition-colors duration-200\"\n            title=\"Refresh\"\n          >\n            {loading ? (\n              <svg className=\"animate-spin h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n            ) : (\n              <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n              </svg>\n            )}\n          </button>\n        </div>\n\n        <div className=\"space-y-4 max-h-96 overflow-y-auto\">\n          {messages.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <svg className=\"h-12 w-12 text-white/40 mx-auto mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n              </svg>\n              <p className=\"text-white/60\">No messages yet</p>\n            </div>\n          ) : (\n            messages.map((message) => {\n              const isSentByUser = message.sender?.username === user.username || message.sender === user.username;\n              const decryptedContent = decryptMessage(message);\n              \n              return (\n                <div\n                  key={message._id}\n                  className={`relative p-4 rounded-lg border ${\n                    isSentByUser\n                      ? 'bg-blue-500/20 border-blue-400/30 ml-8'\n                      : 'bg-white/5 border-white/20 mr-8'\n                  } hover:bg-white/10 transition-all duration-200`}\n                >\n                  <div className=\"flex items-start justify-between mb-2\">\n                    <div className=\"flex items-center space-x-2\">\n                      <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\n                        isSentByUser ? 'bg-blue-500' : 'bg-green-500'\n                      }`}>\n                        <span className=\"text-white text-sm font-medium\">\n                          {isSentByUser \n                            ? user.username?.charAt(0).toUpperCase() \n                            : (message.sender?.username || message.sender)?.charAt(0).toUpperCase()\n                          }\n                        </span>\n                      </div>\n                      <div>\n                        <p className=\"text-white font-medium text-sm\">\n                          {isSentByUser ? 'You' : (message.sender?.username || message.sender)}\n                        </p>\n                        <p className=\"text-white/60 text-xs\">\n                          {formatDate(message.createdAt)}\n                        </p>\n                      </div>\n                    </div>\n                    \n                    {isSentByUser && (\n                      <button\n                        onClick={() => handleDeleteMessage(message._id)}\n                        className=\"text-red-400 hover:text-red-300 p-1 rounded-lg hover:bg-white/10 transition-colors duration-200\"\n                        title=\"Delete\"\n                      >\n                        <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                        </svg>\n                      </button>\n                    )}\n                  </div>\n\n                  <div className=\"mb-3\">\n                    <p className=\"text-white text-sm leading-relaxed whitespace-pre-wrap\">\n                      {decryptedContent}\n                    </p>\n                  </div>\n\n                  {!isSentByUser && (\n                    <div className=\"text-xs text-white/50\">\n                      <p>To: {message.recipient?.username || message.recipient}</p>\n                    </div>\n                  )}\n\n                  <div className=\"flex items-center space-x-4 text-xs text-white/40 mt-2\">\n                    <div className=\"flex items-center\">\n                      <svg className=\"h-3 w-3 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.018-4.118a3.508 3.508 0 00-4.95 0L5.36 15.49a3.508 3.508 0 004.95 4.95l5.708-5.707a3.508 3.508 0 000-4.95z\" />\n                      </svg>\n                      <span>Encrypted</span>\n                    </div>\n                    <div className=\"flex items-center\">\n                      <svg className=\"h-3 w-3 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                      <span>Verified</span>\n                    </div>\n                  </div>\n                </div>\n              );\n            })\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Messaging;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}